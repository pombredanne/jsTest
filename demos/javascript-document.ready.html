<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>document.ready</title>
    <script type="text/javascript">
        (function () {
            var ie = !!(window.attachEvent && !window.opera);
            var wk = /webkit\/(\d+)/i.test(navigator.userAgent) && (RegExp.$1 < 525);
            var fn = [];
            var run = function () { for (var i = 0; i < fn.length; i++) fn[i](); };
            var d = document;
            d.ready = function (f) {
                if (!ie && !wk && d.addEventListener){
                    return d.addEventListener('DOMContentLoaded', f, false);
                }
                if (fn.push(f)> 1){
                    return;
                    /**
                        var t=[5];t.push(4)>1
                        ==>true
                        var t=[];t.push(4)>1
                        ==>false
                    **/
                }
                if (ie){
                    (function () {
                        try {
                            d.documentElement.doScroll('left');
                            run();
                            /*
                            参考网站:
                                http://technet.microsoft.com/zh-cn/library/ms536414     ----以下均为doScroll
                                http://it.china-b.com/web/javascript/20090821/155925_1.html  ---addDOMLoadEvent事件
                                //js中document.documentElement 和document.body 以及其属性
                                http://www.cnblogs.com/clouds008/archive/2012/05/11/2496668.html  --了解
                             */
                        }catch (err) {
                            setTimeout(arguments.callee, 0);
                        }
                    })();
                }
//                else if (wk){
//                    var t = setInterval(function () {
//                        if (/^(loaded|complete)$/.test(d.readyState))clearInterval(t), run();
//                    }, 0);
//                }
            };
        })();
        document.ready(function(){
           alert(document.getElementById('test').innerHTML)
            document.getElementById('test').innerHTML = 'document.ready test!'; //找到
        });
    </script>
</head>
<body>
<div id="test" style="">fdfdsfdsfs</div>
</body>
</html>